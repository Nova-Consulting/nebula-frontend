sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/Fragment","sap/m/MessageToast"],function(e,t,o,n,i,a){"use strict";return e.extend("nebula.controller.CooperadosDetail",{onInit:function(){this._navContainerDelegate={onBeforeShow:this.onBeforeShow,onAfterShow:this.onAfterShow,onAfterHide:this.onAfterHide,onExit:this.onExit};this.getView().addEventDelegate(this._navContainerDelegate,this);this.getOwnerComponent().getRouter().getRoute("cooperadosRouteDetail").attachPatternMatched(this._onRouteMatched,this);var e=new t({busy:true,delay:0});this.getOwnerComponent().setModel(e,"appView")},lazy:function(e){var o=new t({busy:e,delay:0});this.getOwnerComponent().setModel(o,"appView")},_onRouteMatched:function(e){var i=this;var a=e.getParameter("arguments").id;var s=this.byId("cooperadosPage");s.removeAllContent();var r=[];r.push(new o("ID",n.EQ,a));this.getView().getModel().read("/BusinessPartners",{filters:r,success:function(e){this.byId("cooperadosEdit").setEnabled(true);i.getView().setModel(new t(e.results[0]),"modelData")}.bind(this)});this._formFragments={};this._showFormFragment("cooperadosDetail")},handleEditPress:function(){this._oCliente=Object.assign({},this.getView().getModel("modelData").getData());this._toggleButtonsAndView(true)},_toggleButtonsAndView:function(e){var t=this.getView();t.byId("cooperadosEdit").setVisible(!e);t.byId("cooperadosSave").setVisible(e);this._showFormFragment(e?"CooperadosEdit":"CooperadosDetail")},_getFormFragment:function(e){var t=this._formFragments[e],o=this.getView();if(!t){t=i.load({id:o.getId(),name:"nebula.view.fragments."+e});this._formFragments[e]=t}return t},handleSavePress:function(){var e=this.getView().getModel();var t=this.getView().getModel("modelData").getData();this.lazy(true);e.update("/BusinessPartners("+t.ID+")",t,{success:function(e){a.show("O Cliente foi Atualizado");this._toggleButtonsAndView(false)}.bind(this),error:function(e){a.show("Ocorreu um erro ao atualizar o cliente, tente novamente");this._toggleButtonsAndView(false)}})},_clearFragment:function(){var e=this.byId("cooperadosPage");e.removeAllContent()},_showFormFragment:function(e){this._clearFragment();var t=this.byId("cooperadosPage");this._getFormFragment(e).then(function(e){t.insertContent(e)})},onAfterShow:function(){const e=new t({busy:false,delay:0});this.getOwnerComponent().setModel(e,"appView")},onExit:function(){this._clearFragment();this.getView().removeEventDelegate(this._navContainerDelegate);this._navContainerDelegate=null}})});
//# sourceMappingURL=CooperadosDetail.controller.js.map