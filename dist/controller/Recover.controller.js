sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","sap/ui/model/json/JSONModel","../model/formatter"],function(e,t,o,n){"use strict";return e.extend("nebula.controller.Recover",{formatter:n,onInit:function(){this._navContainerDelegate={onBeforeShow:this.onBeforeShow,onAfterShow:this.onAfterShow,onAfterHide:this.onAfterHide};this.getView().addEventDelegate(this._navContainerDelegate,this)},onAfterShow:function(){var e=new o({busy:false,delay:0});this.getOwnerComponent().setModel(e,"appView")},onBackPress:function(){var e=this.getOwnerComponent().getRouter();e.navTo("loginRoute")},onPress:function(){var e=this.byId("inputEmail");var o=this.byId("labelEmail");var n=e.getValue();e.removeStyleClass("inputError");o.removeStyleClass("labelError");if(!this._isValidUsername(n)){e.addStyleClass("inputError");o.addStyleClass("labelError");t.error("Por favor, preencha o campo de e-mail");return}else{}this._doLogin(n)},onForgotPasswordPress:function(){var e=this.getOwnerComponent().getRouter();e.navTo("recoverRoute")},_isValidUsername:function(e){var t=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;return t.test(e)},_isValidPassword:function(e){var t=/^[a-zA-Z0-9]{1,}$/;return t.test(e)},onExit:function(){this.getView().removeEventDelegate(this._navContainerDelegate);this._navContainerDelegate=null},_doLogin:function(e){var o={email:e};var n=jQuery.ajax({type:"POST",contentType:"application/json",url:"http://20.64.235.73:4004/odata/v4/admin/recoverPassword",dataType:"json",data:JSON.stringify(o),async:true,success:function(e,t,o){sap.m.MessageToast.show("Um E-mail foi enviado com as instruções de recuperação de senha!")},error:function(e,o,n){if(e.status==404){t.error("Usuário não encontrado")}}})}})});
//# sourceMappingURL=Recover.controller.js.map